<%% content_tag_for(:li, address) do -%>
  <%% fields_for "#{dom_class(owner)}[address_attributes][]", address do |form| -%>
    <%% unless address.new_record? -%>
      <%%= form.hidden_field :id, :index => nil %>
    <%% end -%>
    <table cellpadding="0" cellspacing="0" border="0">
      <tr>
        <td>
          <%%= form.text_area :address, :size => "50x3", :index => nil %><br />
          <%%= form.label :city %><br />
          <%%= form.text_field :city, :index => nil %><br />
          <table cellpadding="0" cellspacing="0" border="0">
            <tr>
              <td>
                <%%= form.label :province %><br />
                <%%= form.text_field :province, :index => nil %>
              </td>
              <td>
                <%%= form.label :zip %><br />
                <%%= form.text_field :zip, :size => "5", :index => nil %>
              </td>
            </tr>
          </table>
          <%%= form.collection_select :country_id, Country.all, :id, :name, {}, { :index => nil } %>
        </td>
        <td>
          <%%= form.collection_select :address_type_id,
            AddressType.all, :id, :description, {}, { :index => nil } %>
          <%% if address.new_record? -%>
            <%%= link_to_function t("actions.delete"),
              "$(this).up('li').remove();", :class => :red %>
          <%% else -%>
            <%%= link_to_remote t("actions.delete"), :url => address,
              :confirm => "actions.confirm.delete",
              :method => :delete,
              :html => { :class => :red } %>
          <%% end -%>
        </td>
      </tr>
    </table>
  <%% end -%>
  <br />
<%% end -%>
